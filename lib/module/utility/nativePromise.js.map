{"version":3,"sources":["nativePromise.ts"],"names":["Constants","InvalidArgumentError","InvalidStateError","UnexpectedNativeError","constructTwilioError","settleNativePromise","nativePromise","nativePromiseResult","promiseKeyStatus","PromiseStatusValueRejectedWithCode","promiseKeyErrorMessage","promiseKeyErrorCode","PromiseStatusValueRejectedWithName","message","promiseKeyErrorName","ErrorCodeInvalidArgumentError","ErrorCodeInvalidStateError","promiseKeyValue"],"mappings":"AAAA,SAASA,SAAT,QAA0B,cAA1B;AACA,SAASC,oBAAT,QAAqC,+BAArC;AACA,SAASC,iBAAT,QAAkC,4BAAlC;AACA,SAASC,qBAAT,QAAsC,gCAAtC;AACA,SAASC,oBAAT,QAAqC,kBAArC;AAGA,OAAO,MAAMC,mBAAmB,GAAG,MACjCC,aADiC,IAElB;AACf,QAAMC,mBAAmB,GAAG,MAAMD,aAAlC;;AAEA,MACEC,mBAAmB,CAACC,gBAApB,KACAR,SAAS,CAACS,kCAFZ,EAGE;AACA,UAAML,oBAAoB,CACxBG,mBAAmB,CAACG,sBADI,EAExBH,mBAAmB,CAACI,mBAFI,CAA1B;AAID;;AAED,MACEJ,mBAAmB,CAACC,gBAApB,KACAR,SAAS,CAACY,kCAFZ,EAGE;AACA,UAAM;AAAEF,MAAAA,sBAAsB,EAAEG;AAA1B,QAAsCN,mBAA5C;;AAEA,YAAQA,mBAAmB,CAACO,mBAA5B;AACE,WAAKd,SAAS,CAACe,6BAAf;AACE,cAAM,IAAId,oBAAJ,CAAyBY,OAAzB,CAAN;;AACF,WAAKb,SAAS,CAACgB,0BAAf;AACE,cAAM,IAAId,iBAAJ,CAAsBW,OAAtB,CAAN;;AACF;AACE,cAAM,IAAIV,qBAAJ,CAA0BU,OAA1B,CAAN;AANJ;AAQD;;AAED,SAAON,mBAAmB,CAACU,eAA3B;AACD,CAhCM","sourcesContent":["import { Constants } from '../constants';\nimport { InvalidArgumentError } from '../error/InvalidArgumentError';\nimport { InvalidStateError } from '../error/InvalidStateError';\nimport { UnexpectedNativeError } from '../error/UnexpectedNativeError';\nimport { constructTwilioError } from '../error/utility';\nimport { NativePromise } from '../type/NativeModule';\n\nexport const settleNativePromise = async <T>(\n  nativePromise: NativePromise<T>\n): Promise<T> => {\n  const nativePromiseResult = await nativePromise;\n\n  if (\n    nativePromiseResult.promiseKeyStatus ===\n    Constants.PromiseStatusValueRejectedWithCode\n  ) {\n    throw constructTwilioError(\n      nativePromiseResult.promiseKeyErrorMessage,\n      nativePromiseResult.promiseKeyErrorCode\n    );\n  }\n\n  if (\n    nativePromiseResult.promiseKeyStatus ===\n    Constants.PromiseStatusValueRejectedWithName\n  ) {\n    const { promiseKeyErrorMessage: message } = nativePromiseResult;\n\n    switch (nativePromiseResult.promiseKeyErrorName) {\n      case Constants.ErrorCodeInvalidArgumentError:\n        throw new InvalidArgumentError(message);\n      case Constants.ErrorCodeInvalidStateError:\n        throw new InvalidStateError(message);\n      default:\n        throw new UnexpectedNativeError(message);\n    }\n  }\n\n  return nativePromiseResult.promiseKeyValue;\n};\n"]}