{"version":3,"sources":["nativePromise.ts"],"names":["settleNativePromise","nativePromise","nativePromiseResult","promiseKeyStatus","Constants","PromiseStatusValueRejectedWithCode","promiseKeyErrorMessage","promiseKeyErrorCode","PromiseStatusValueRejectedWithName","message","promiseKeyErrorName","ErrorCodeInvalidArgumentError","InvalidArgumentError","ErrorCodeInvalidStateError","InvalidStateError","UnexpectedNativeError","promiseKeyValue"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AAGO,MAAMA,mBAAmB,GAAG,MACjCC,aADiC,IAElB;AACf,QAAMC,mBAAmB,GAAG,MAAMD,aAAlC;;AAEA,MACEC,mBAAmB,CAACC,gBAApB,KACAC,qBAAUC,kCAFZ,EAGE;AACA,UAAM,mCACJH,mBAAmB,CAACI,sBADhB,EAEJJ,mBAAmB,CAACK,mBAFhB,CAAN;AAID;;AAED,MACEL,mBAAmB,CAACC,gBAApB,KACAC,qBAAUI,kCAFZ,EAGE;AACA,UAAM;AAAEF,MAAAA,sBAAsB,EAAEG;AAA1B,QAAsCP,mBAA5C;;AAEA,YAAQA,mBAAmB,CAACQ,mBAA5B;AACE,WAAKN,qBAAUO,6BAAf;AACE,cAAM,IAAIC,0CAAJ,CAAyBH,OAAzB,CAAN;;AACF,WAAKL,qBAAUS,0BAAf;AACE,cAAM,IAAIC,oCAAJ,CAAsBL,OAAtB,CAAN;;AACF;AACE,cAAM,IAAIM,4CAAJ,CAA0BN,OAA1B,CAAN;AANJ;AAQD;;AAED,SAAOP,mBAAmB,CAACc,eAA3B;AACD,CAhCM","sourcesContent":["import { Constants } from '../constants';\nimport { InvalidArgumentError } from '../error/InvalidArgumentError';\nimport { InvalidStateError } from '../error/InvalidStateError';\nimport { UnexpectedNativeError } from '../error/UnexpectedNativeError';\nimport { constructTwilioError } from '../error/utility';\nimport { NativePromise } from '../type/NativeModule';\n\nexport const settleNativePromise = async <T>(\n  nativePromise: NativePromise<T>\n): Promise<T> => {\n  const nativePromiseResult = await nativePromise;\n\n  if (\n    nativePromiseResult.promiseKeyStatus ===\n    Constants.PromiseStatusValueRejectedWithCode\n  ) {\n    throw constructTwilioError(\n      nativePromiseResult.promiseKeyErrorMessage,\n      nativePromiseResult.promiseKeyErrorCode\n    );\n  }\n\n  if (\n    nativePromiseResult.promiseKeyStatus ===\n    Constants.PromiseStatusValueRejectedWithName\n  ) {\n    const { promiseKeyErrorMessage: message } = nativePromiseResult;\n\n    switch (nativePromiseResult.promiseKeyErrorName) {\n      case Constants.ErrorCodeInvalidArgumentError:\n        throw new InvalidArgumentError(message);\n      case Constants.ErrorCodeInvalidStateError:\n        throw new InvalidStateError(message);\n      default:\n        throw new UnexpectedNativeError(message);\n    }\n  }\n\n  return nativePromiseResult.promiseKeyValue;\n};\n"]}